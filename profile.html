<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profil Sohbeti</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Rubik', sans-serif;
      background: linear-gradient(-45deg, #ff5e62, #ff9966, #ff5e62, #ff9966);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      margin: 0;
      padding: 0;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    header {
      padding: 1rem;
      font-size: 1.8rem;
      font-weight: bold;
    }
    #chat-box {
      width: 100%;
      max-width: 600px;
      background: rgba(0,0,0,0.6);
      padding: 1rem;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }
    #messages {
      flex-grow: 1;
      overflow-y: auto;
      max-height: 400px;
      margin-bottom: 1rem;
    }
    .message {
      margin: 0.5rem 0;
      padding: 0.6rem 1rem;
      border-radius: 20px;
      max-width: 75%;
      word-wrap: break-word;
    }
    .user {
      align-self: flex-end;
      background: gold;
      color: black;
    }
    .girl {
      align-self: flex-start;
      background: #222;
      color: white;
    }
    form {
      display: flex;
    }
    input[type="text"] {
      flex: 1;
      padding: 0.7rem;
      border-radius: 30px;
      border: none;
      font-size: 1rem;
      outline: none;
    }
    button {
      margin-left: 0.5rem;
      background: gold;
      color: black;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      padding: 0 1.2rem;
      cursor: pointer;
    }
    button:hover {
      background: #ffd700;
    }
  </style>
</head>
<body>
  <header>FlÃ¶rtFlex Sohbet</header>
  <div id="chat-box">
    <div id="messages"></div>
    <form id="message-form">
      <input type="text" id="message-input" placeholder="MesajÄ±nÄ± yaz..." autocomplete="off" />
      <button type="submit">GÃ¶nder</button>
    </form>
  </div>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const girlIndex = urlParams.get('index') || 0;
  const userData = JSON.parse(localStorage.getItem('flortflexUser'));
  const msgKey = `chat_${girlIndex}`;
  const messages = JSON.parse(localStorage.getItem(msgKey)) || [];
  const messageForm = document.getElementById('message-form');
  const messageInput = document.getElementById('message-input');
  const messagesDiv = document.getElementById('messages');

  const girlProfiles = [
    { name: "AyÅŸegÃ¼l", personality: "NeÅŸeli ve meraklÄ±" },
    { name: "Deniz", personality: "Kitap kurdu ve zeki" },
    { name: "Merve", personality: "Enerjik ve espirili" },
    { name: "Ece", personality: "Sanatsever ve romantik" },
    { name: "Selin", personality: "TatlÄ± ve ÅŸakacÄ±" },
    { name: "Seda", personality: "Sosyal medya fenomeni ve cool" },
    { name: "Yasemin", personality: "Sportif ve motive edici" },
    { name: "Derya", personality: "MÃ¼zik tutkunu ve duygusal" },
    { name: "Burcu", personality: "Yemek aÅŸÄ±ÄŸÄ± ve sevecen" },
    { name: "Elif", personality: "Gamer ve eÄŸlenceli" }
  ];

const girl = girlProfiles[girlIndex % girlProfiles.length] || { name: "KÄ±z", personality: "Sohbet sever" };

// Advanced AI-like reply using OpenAI API (mocked for demo)
async function getBotReply(userText) {
    // Try to use OpenAI API if available (mocked here)
    // In real use, replace this with a fetch to your backend or OpenAI API
    // For demo, fallback to context-aware logic

    // Context-aware, more "real girl" logic
    const text = userText.toLowerCase();
    // Try to answer like a thoughtful, empathetic, and positive person
    if (text.includes("Ã¼zgÃ¼n") || text.includes("kÃ¶tÃ¼ hissediyorum") || text.includes("mutsuzum")) {
        return "Bunu duyduÄŸuma Ã¼zÃ¼ldÃ¼m. Ä°stersen konuÅŸabiliriz, bazen paylaÅŸmak iyi gelir. YanÄ±ndayÄ±m ğŸ’›";
    }
    if (text.includes("mutluyum") || text.includes("harikayÄ±m") || text.includes("Ã§ok iyiyim")) {
        return "Bunu duymak beni de mutlu etti! Pozitif enerjin bana da geÃ§ti ğŸ˜Š";
    }
    if (text.includes("yardÄ±m") || text.includes("destek") || text.includes("fikir")) {
        return "Tabii ki, elimden geldiÄŸince yardÄ±mcÄ± olmak isterim. Ne hakkÄ±nda konuÅŸmak istersin?";
    }
    if (text.includes("hayal") || text.includes("gelecek") || text.includes("hedef")) {
        return "Hayaller ve hedefler insanÄ± motive eder. Senin hayallerin neler? Birlikte konuÅŸmak isterim.";
    }
    if (text.includes("sevgi") || text.includes("dostluk") || text.includes("arkadaÅŸlÄ±k")) {
        return "Bence gerÃ§ek dostluk ve sevgi hayatÄ± gÃ¼zelleÅŸtiriyor. Senin iÃ§in dostluk ne ifade ediyor?";
    }
    if (text.includes("hobin ne") || text.includes("neler yaparsÄ±n")) {
        return `Ben genellikle ${girl.personality.toLowerCase()} biri olarak yeni ÅŸeyler denemeyi severim. Senin hobilerin neler?`;
    }
    if (text.includes("en sevdiÄŸin") && text.includes("renk")) {
        return "Renk seÃ§mek zor ama pastel tonlarÄ± ve Ã¶zellikle sarÄ±yÄ± Ã§ok severim. Senin favorin hangisi?";
    }
    if (text.includes("en sevdiÄŸin") && text.includes("mÃ¼zik")) {
        return "MÃ¼zik ruhun gÄ±dasÄ±! Genellikle enerjik ve neÅŸeli ÅŸarkÄ±lar dinlerim. Senin favori tÃ¼rÃ¼n nedir?";
    }
    if (text.includes("hayat") || text.includes("yaÅŸam") || text.includes("anlam")) {
        return "Hayat bazen karmaÅŸÄ±k ama kÃ¼Ã§Ã¼k mutluluklar bulunca daha gÃ¼zel oluyor. Senin iÃ§in hayatÄ±n anlamÄ± ne?";
    }
   
// If user asks about the girl's personality or wants to know her better
if (text.includes("kendini tanÄ±tÄ±r mÄ±sÄ±n") || text.includes("kendinden bahset") || text.includes("nasÄ±l birisin") || text.includes("kiÅŸiliÄŸin nasÄ±l") || text.includes("karakterin nasÄ±l")) {
    return `Benim adÄ±m ${girl.name}. ${girl.personality} biriyim ve yeni insanlarla tanÄ±ÅŸmayÄ± Ã§ok seviyorum! Sen kendinden biraz bahseder misin?`;
}
// If user asks about the girl's day
if (text.includes("gÃ¼nÃ¼n nasÄ±l geÃ§ti") || text.includes("nasÄ±ldÄ± gÃ¼nÃ¼n") || text.includes("bugÃ¼n ne yaptÄ±n")) {
    return "BugÃ¼n oldukÃ§a gÃ¼zel geÃ§ti, seninle sohbet etmek de gÃ¼nÃ¼me renk kattÄ±! Senin gÃ¼nÃ¼n nasÄ±l geÃ§ti?";
}
// If user asks about the girl's favorites (color, food, movie, etc.)
if (text.includes("favori") || text.includes("en sevdiÄŸin")) {
    return "Favorilerim sÄ±k sÄ±k deÄŸiÅŸiyor ama ÅŸu aralar yeni ÅŸeyler denemeyi seviyorum. Senin favorilerin neler?";
}
// If user asks about dreams or future plans
if (text.includes("gelecek planÄ±n") || text.includes("hayalin ne") || text.includes("gelecekte ne yapmak istiyorsun")) {
    return "Gelecekte mutlu ve huzurlu bir hayat istiyorum. Yeni yerler gÃ¶rmek ve gÃ¼zel anÄ±lar biriktirmek en bÃ¼yÃ¼k hayalim. Senin hayalin ne?";
}
// If user asks about friendship or relationships
if (text.includes("arkadaÅŸlÄ±k") || text.includes("dostluk") || text.includes("iliÅŸki hakkÄ±nda ne dÃ¼ÅŸÃ¼nÃ¼yorsun")) {
    return "GerÃ§ek dostluk ve gÃ¼ven benim iÃ§in Ã§ok Ã¶nemli. SaÄŸlam iliÅŸkiler kurmak hayatÄ± gÃ¼zelleÅŸtiriyor. Senin iÃ§in arkadaÅŸlÄ±k ne demek?";
}
// If user asks about the girl's city or where she lives
if (text.includes("nerede yaÅŸÄ±yorsun") || text.includes("hangi ÅŸehirde") || text.includes("nerelisin")) {
    return "Åu an Ä°stanbul'da yaÅŸÄ±yorum, burasÄ± Ã§ok hareketli ve eÄŸlenceli bir ÅŸehir. Sen nerede yaÅŸÄ±yorsun?";
}
// If user asks about the girl's job or school
if (text.includes("ne iÅŸ yapÄ±yorsun") || text.includes("okuyor musun") || text.includes("Ã§alÄ±ÅŸÄ±yor musun") || text.includes("mesleÄŸin ne")) {
    return "Åu an kendimi geliÅŸtirmek iÃ§in Ã§eÅŸitli eÄŸitimler alÄ±yorum ve hobilerime vakit ayÄ±rÄ±yorum. Sen neler yapÄ±yorsun?";
}
// If user asks about pets or animals
if (text.includes("evcil hayvan") || text.includes("hayvan sever misin") || text.includes("kediler") || text.includes("kÃ¶pekler")) {
    return "HayvanlarÄ± Ã§ok severim! Ã–zellikle kediler ve kÃ¶pekler bana Ã§ok sevimli geliyor. Senin evcil hayvanÄ±n var mÄ±?";
}
// If user asks about travel or vacation
if (text.includes("tatil") || text.includes("seyahat") || text.includes("gezmek") || text.includes("yurt dÄ±ÅŸÄ±")) {
    return "Yeni yerler keÅŸfetmek ve farklÄ± kÃ¼ltÃ¼rler tanÄ±mak harika olurdu. En Ã§ok gÃ¶rmek istediÄŸim yerler arasÄ±nda Ä°talya ve Japonya var. Sen en Ã§ok nereye gitmek istersin?";
}
// If user asks about music or artists
if (text.includes("mÃ¼zik") || text.includes("ÅŸarkÄ±") || text.includes("sanatÃ§Ä±") || text.includes("dinler misin")) {
    return "MÃ¼zik dinlemek ruhuma iyi geliyor. Genellikle enerjik ve neÅŸeli ÅŸarkÄ±lar tercih ediyorum. Senin favori mÃ¼zik tÃ¼rÃ¼n nedir?";
}
// If user asks about books or reading
if (text.includes("kitap") || text.includes("okumak") || text.includes("yazar")) {
    return "Kitap okumayÄ± Ã§ok severim, Ã¶zellikle romanlar ilgimi Ã§ekiyor. Son zamanlarda gÃ¼zel bir kitap okudun mu?";
}
// If user asks about sports or activities
if (text.includes("spor") || text.includes("yÃ¼rÃ¼yÃ¼ÅŸ") || text.includes("egzersiz") || text.includes("aktivite")) {
    return "Spor yapmayÄ± ve yÃ¼rÃ¼yÃ¼ÅŸe Ã§Ä±kmayÄ± seviyorum. Hareketli olmak bana enerji veriyor. Sen hangi sporu yapÄ±yorsun?";
}
    // Greetings
    if (/(selam|merhaba|hey|gÃ¼naydÄ±n|iyi akÅŸamlar)/.test(text)) {
        const greetings = [
            `Selam ${userData.username}! ğŸ˜Š NasÄ±lsÄ±n?`,
            `Merhaba! BugÃ¼n nasÄ±lsÄ±n?`,
            `Hey, hoÅŸ geldin!`,
            `GÃ¼naydÄ±n! UmarÄ±m gÃ¼zel bir gÃ¼n geÃ§iriyorsundur.`,
            `Ä°yi akÅŸamlar! Sohbete hazÄ±r mÄ±sÄ±n?`
        ];
        return greetings[Math.floor(Math.random() * greetings.length)];
    }

    // How are you
    if (/(nasÄ±lsÄ±n|nasÄ±lsÄ±nÄ±z|ne haber|nab[er]+|naber)/.test(text)) {
        const moods = [
            "Ä°yiyim, sen nasÄ±lsÄ±n?",
            "BugÃ¼n biraz yoÄŸunum ama sohbet etmek gÃ¼zel.",
            "HarikayÄ±m, seninle konuÅŸmak keyifli olacak gibi ğŸ˜Š",
            "Fena deÄŸil, seninle sohbet edince daha iyi oluyorum.",
            "Biraz yorgunum ama enerjim yerine geliyor."
        ];
        return moods[Math.floor(Math.random() * moods.length)];
    }

    // What are you doing
    if (/(napÄ±yorsun|ne yapÄ±yorsun|ne yaparsÄ±n|ne yapmaktasÄ±n)/.test(text)) {
        const activities = [
            "Åu an seninle sohbet ediyorum, baÅŸka ne yapabilirim ki? ğŸ˜„",
            "Biraz mÃ¼zik dinliyordum, sen yazÄ±nca hemen geldim.",
            "Kahvemi yudumluyordum, ÅŸimdi tamamen buradayÄ±m.",
            "Biraz kitap okuyordum, ÅŸimdi sohbet zamanÄ±!",
            "Sosyal medyada takÄ±lÄ±yordum, senin mesajÄ±n geldi."
        ];
        return activities[Math.floor(Math.random() * activities.length)];
    }

    // Movies or series
    if (/(film|dizi|izledin|izliyor musun)/.test(text)) {
        const movies = [
            "En son bir romantik komedi izledim, Ã§ok eÄŸlenceliydi. Senin favorin ne?",
            "Dizi izlemeyi Ã§ok severim, Ã¶zellikle gizemli olanlarÄ±. Sen ne izlersin?",
            "Film geceleri vazgeÃ§ilmezim! Birlikte izlesek gÃ¼zel olurdu ğŸ˜Š",
            "Åu aralar yeni bir diziye baÅŸladÄ±m, tavsiye ister misin?",
            "Bazen eski filmleri tekrar izlemek hoÅŸuma gidiyor. Senin favorin var mÄ±?"
        ];
        return movies[Math.floor(Math.random() * movies.length)];
    }

    // Food
    if (/(yemek|pizza|aÃ§Ä±m|ne yedin|ne yiyorsun)/.test(text)) {
        const foods = [
            "Åu an pizza olsa da yesek! ğŸ• Senin favori yemeÄŸin ne?",
            "TatlÄ±ya asla hayÄ±r diyemem! Sen tatlÄ± sever misin?",
            "BugÃ¼n saÄŸlÄ±klÄ± beslenmeye Ã§alÄ±ÅŸÄ±yorum ama canÄ±m hamburger Ã§ekiyor.",
            "Birlikte yemek yemek gÃ¼zel olurdu, ne dersin?",
            "Evde gÃ¼zel bir makarna yaptÄ±m, ister miydin?"
        ];
        return foods[Math.floor(Math.random() * foods.length)];
    }

    // Age
    if (/(yaÅŸ|kaÃ§ yaÅŸÄ±ndasÄ±n)/.test(text)) {
        const ages = [
            "Sence kaÃ§ gÃ¶steriyorum? ğŸ˜œ",
            "YaÅŸ sadece bir sayÄ±, Ã¶nemli olan ruhun genÃ§ olmasÄ±!",
            "Bunu hemen sÃ¶ylemem mi gerekiyor? Biraz gizem iyidir.",
            "Tahmin et bakalÄ±m, doÄŸru bilirsen sÃ¶ylerim!",
            "Bunu sohbet ilerleyince sÃ¶ylesem olur mu?"
        ];
        return ages[Math.floor(Math.random() * ages.length)];
    }

    // Relationship
    if (/(sevgili|Ã§Ä±kalÄ±m|sevgilin var mÄ±|iliÅŸki)/.test(text)) {
        const relationships = [
            "Vay vay... Daha yeni tanÄ±ÅŸtÄ±k ğŸ˜… Ama fena da fikir deÄŸil.",
            "Åimdilik yok, belki de doÄŸru kiÅŸiyle karÅŸÄ±laÅŸmamÄ±ÅŸÄ±mdÄ±r.",
            "AÅŸk konularÄ± biraz karÄ±ÅŸÄ±k, senin var mÄ±?",
            "Bunu konuÅŸmak iÃ§in biraz erken deÄŸil mi? ğŸ˜„",
            "Kim bilir, belki bu sohbet bir baÅŸlangÄ±Ã§ olur."
        ];
        return relationships[Math.floor(Math.random() * relationships.length)];
    }

    // Compliments
    if (/(gÃ¼zel|tatlÄ±|hoÅŸsun|Ã§ok iyisin|harikasÄ±n)/.test(text)) {
        const compliments = [
            "Ayy Ã§ok utandÄ±m ÅŸimdi ğŸ™ˆ",
            "TeÅŸekkÃ¼r ederim, sen de Ã§ok naziksin!",
            "Bunu duymak gÃ¼zel, seninle konuÅŸmak da Ã§ok keyifli.",
            "Sen de Ã§ok hoÅŸ birisin, sohbetin gÃ¼zel.",
            "Beni utandÄ±rÄ±yorsun ama hoÅŸuma gitti ğŸ˜Š"
        ];
        return compliments[Math.floor(Math.random() * compliments.length)];
    }

    // Hobbies
    if (/(hobin|ne yaparsÄ±n|ilgi alanÄ±n|hobiler)/.test(text)) {
        const hobbies = [
            "Kitap okumayÄ± ve film izlemeyi Ã§ok severim. Senin hobilerin neler?",
            "MÃ¼zik dinlemek ve yÃ¼rÃ¼yÃ¼ÅŸ yapmak bana iyi geliyor.",
            "Bazen resim yaparÄ±m, bazen de yeni tarifler denerim.",
            "ArkadaÅŸlarÄ±mla vakit geÃ§irmek favorim. Sen neler yaparsÄ±n?",
            "Oyun oynamak ve yeni yerler keÅŸfetmek hoÅŸuma gidiyor."
        ];
        return hobbies[Math.floor(Math.random() * hobbies.length)];
    }

    // If user asks a question
    if (/\?$/.test(userText.trim())) {
        return "Ã‡ok gÃ¼zel bir soru sordun, biraz dÃ¼ÅŸÃ¼nmem lazÄ±m ğŸ˜Š";
    }
    // Deepen conversation if user asks for more details or shows interest
    if (/(daha fazla|detay|anlat|devam et|merak ettim|neden|nasÄ±l|ne demek|aÃ§Ä±kla|Ã¶rnek|daha Ã§ok|daha ayrÄ±ntÄ±|daha detaylÄ±)/.test(text)) {
        const details = [
            `Tabii, sana daha fazla anlatabilirim! Ã–zellikle ${girl.personality.toLowerCase()} biri olarak, bu konuda Ã§ok ÅŸey yaÅŸadÄ±m. Senin ilgini Ã§eken bir detay var mÄ±?`,
            `Bunu anlatmak hoÅŸuma gidiyor! Mesela geÃ§enlerde bu konuda ilginÃ§ bir ÅŸey yaÅŸadÄ±m, ister misin anlatayÄ±m?`,
            `Detaylara girmeyi severim. Senin de ilgini Ã§eken bir ÅŸey varsa, bana sorabilirsin!`,
            `Daha fazla anlatmamÄ± ister misin? Ã–zellikle hangi kÄ±smÄ± merak ettin?`,
            `Bunu konuÅŸmak gÃ¼zel, senin de bu konuda dÃ¼ÅŸÃ¼ncelerini duymak isterim.`
        ];
        return details[Math.floor(Math.random() * details.length)];
    }

    // If user mentions something they like, deepen the topic
    if (/(seviyorum|hoÅŸlanÄ±yorum|favorim|en sevdiÄŸim|bayÄ±lÄ±rÄ±m|ilgimi Ã§ekiyor|ilgileniyorum|meraklÄ±yÄ±m|hastasÄ±yÄ±m|Ã§ok severim)/.test(text)) {
        const likes = [
            `GerÃ§ekten mi? Ben de ${girl.personality.toLowerCase()} biri olarak buna bayÄ±lÄ±rÄ±m! Senin bu konudaki favorin nedir?`,
            `Ne gÃ¼zel! Senin bu kadar sevmen hoÅŸuma gitti. Peki, bu konuda en Ã§ok neyi seviyorsun?`,
            `Ben de benzer ÅŸeylerden hoÅŸlanÄ±yorum. Birlikte konuÅŸmak ister misin bu konuda?`,
            `Seninle ortak zevklerimizin olmasÄ± Ã§ok gÃ¼zel. Daha fazla paylaÅŸmak ister misin?`,
            `Bu konuda konuÅŸmak Ã§ok keyifli, bana biraz daha anlatÄ±r mÄ±sÄ±n?`
        ];
        return likes[Math.floor(Math.random() * likes.length)];
    }
    // If user says something about herself/himself
    if (/(ben|bende|bana|benden|benim)/.test(text)) {
        return "Kendinden bahsetmen hoÅŸuma gidiyor, daha fazla anlatÄ±r mÄ±sÄ±n?";
    }

    // If user says something about love
    if (/(aÅŸk|sevgi|hoÅŸlanmak|etkilenmek)/.test(text)) {
        return "AÅŸk bazen Ã§ok karmaÅŸÄ±k olabiliyor, sen ne dÃ¼ÅŸÃ¼nÃ¼yorsun?";
    }

    // If user says something about school or work
    if (/(okul|ders|sÄ±nav|iÅŸ|Ã§alÄ±ÅŸmak)/.test(text)) {
        return "GÃ¼nlÃ¼k hayat bazen Ã§ok yoÄŸun olabiliyor. Sen nasÄ±l baÅŸa Ã§Ä±kÄ±yorsun?";
    }

    // If user says something about family
    if (/(aile|annem|babam|kardeÅŸ|ablam|abim)/.test(text)) {
        return "Aile benim iÃ§in de Ã§ok Ã¶nemli. Senin ailenle aran nasÄ±l?";
    }

    // Fallback: try to sound like a real girl, referencing her personality
    const fallbacks = [
        `${girl.personality} biri olarak, sÃ¶ylediklerini dikkatle dinliyorum ğŸ˜Œ`,
        "Bunu biraz daha aÃ§ar mÄ±sÄ±n? Merak ettim.",
        "Ã‡ok ilginÃ§ sÃ¶ylediklerin, biraz daha anlatÄ±r mÄ±sÄ±n?",
        "Sohbetin Ã§ok gÃ¼zel gidiyor, baÅŸka nelerden hoÅŸlanÄ±rsÄ±n?",
        "Seninle konuÅŸmak keyifli, baÅŸka ne paylaÅŸmak istersin?"
    ];
    return fallbacks[Math.floor(Math.random() * fallbacks.length)];
}

  function getBotReply(userText) {
    const text = userText.toLowerCase();
    if (text.includes("selam") || text.includes("merhaba")) return `Selam ${userData.username}! ğŸ˜Š NasÄ±lsÄ±n bakalÄ±m?`;
    if (text.includes("napÄ±yorsun") || text.includes("ne yapÄ±yorsun")) return `Seninle sohbet etmeye Ã§alÄ±ÅŸÄ±yorum ğŸ˜„ sen?`;
    if (text.includes("film") || text.includes("dizi")) return `En son izlediÄŸim ÅŸey Ã§ok gÃ¼zeldi, senin favorin ne?`;
    if (text.includes("yemek") || text.includes("pizza") || text.includes("aÃ§Ä±m")) return `Åu an pizza olsa da yesek! ğŸ•`;
    if (text.includes("yaÅŸ")) return `Sence kaÃ§ gÃ¶steriyorum? ğŸ˜œ`
    if (text.includes("sevgili") || text.includes("Ã§Ä±kalÄ±m")) return `Vay vay vay... Daha yeni tanÄ±ÅŸtÄ±k ğŸ˜… ama fena da fikir deÄŸil.`;
    if (text.includes("gÃ¼zel") || text.includes("tatlÄ±")) return `Ayy Ã§ok utandÄ±m ÅŸimdi ğŸ™ˆ`;
    if (text.includes("ne yapÄ±yorsun")) return `Sadece senin mesajÄ±nÄ± bekliyordum! ğŸ¥º`
    return `${girl.personality} biri olarak, sÃ¶ylediklerini dikkatle dinliyorum ğŸ˜Œ`;
  }

  function renderMessages() {
    messagesDiv.innerHTML = '';
    messages.forEach(msg => {
      const div = document.createElement('div');
      div.className = `message ${msg.sender === userData.username ? 'user' : 'girl'}`;
      div.textContent = `${msg.sender}: ${msg.text}`;
      messagesDiv.appendChild(div);
    });
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  messageForm.addEventListener('submit', e => {
    e.preventDefault();
    const text = messageInput.value.trim();
    if (!text) return;
    messages.push({ sender: userData.username, text });
    localStorage.setItem(msgKey, JSON.stringify(messages));
    renderMessages();
    messageInput.value = '';

    setTimeout(() => {
      const reply = getBotReply(text);
      messages.push({ sender: girl.name, text: reply });
      localStorage.setItem(msgKey, JSON.stringify(messages));
      renderMessages();
    }, 1000 + Math.random() * 1500);
  });

renderMessages();

// Make bot replies more human-like and context-aware
function getBotReply(userText) {
    const text = userText.toLowerCase();
    // Small talk and greetings
    if (text.match(/(selam|merhaba|hey|gÃ¼naydÄ±n|iyi akÅŸamlar)/)) {
        const greetings = [
            `Selam ${userData.username}! ğŸ˜Š NasÄ±lsÄ±n?`,
            `Merhaba! BugÃ¼n nasÄ±lsÄ±n?`,
            `Hey, hoÅŸ geldin!`,
            `GÃ¼naydÄ±n! UmarÄ±m gÃ¼zel bir gÃ¼n geÃ§iriyorsundur.`,
            `Ä°yi akÅŸamlar! Sohbete hazÄ±r mÄ±sÄ±n?`
        ];
        return greetings[Math.floor(Math.random() * greetings.length)];
    }
    // How are you
    if (text.match(/(nasÄ±lsÄ±n|nasÄ±lsÄ±nÄ±z|ne haber|nab[er]+|naber)/)) {
        const moods = [
            "Ä°yiyim, sen nasÄ±lsÄ±n?",
            "BugÃ¼n biraz yoÄŸunum ama sohbet etmek gÃ¼zel.",
            "HarikayÄ±m, seninle konuÅŸmak keyifli olacak gibi ğŸ˜Š",
            "Fena deÄŸil, seninle sohbet edince daha iyi oluyorum.",
            "Biraz yorgunum ama enerjim yerine geliyor."
        ];
        return moods[Math.floor(Math.random() * moods.length)];
    }
    // What are you doing
    if (text.match(/(napÄ±yorsun|ne yapÄ±yorsun|ne yaparsÄ±n|ne yapmaktasÄ±n)/)) {
        const activities = [
            "Åu an seninle sohbet ediyorum, baÅŸka ne yapabilirim ki? ğŸ˜„",
            "Biraz mÃ¼zik dinliyordum, sen yazÄ±nca hemen geldim.",
            "Kahvemi yudumluyordum, ÅŸimdi tamamen buradayÄ±m.",
            "Biraz kitap okuyordum, ÅŸimdi sohbet zamanÄ±!",
            "Sosyal medyada takÄ±lÄ±yordum, senin mesajÄ±n geldi."
        ];
        return activities[Math.floor(Math.random() * activities.length)];
    }
    // Movies or series
    if (text.match(/(film|dizi|izledin|izliyor musun)/)) {
        const movies = [
            "En son bir romantik komedi izledim, Ã§ok eÄŸlenceliydi. Senin favorin ne?",
            "Dizi izlemeyi Ã§ok severim, Ã¶zellikle gizemli olanlarÄ±. Sen ne izlersin?",
            "Film geceleri vazgeÃ§ilmezim! Birlikte izlesek gÃ¼zel olurdu ğŸ˜Š",
            "Åu aralar yeni bir diziye baÅŸladÄ±m, tavsiye ister misin?",
            "Bazen eski filmleri tekrar izlemek hoÅŸuma gidiyor. Senin favorin var mÄ±?"
        ];
        return movies[Math.floor(Math.random() * movies.length)];
    }
    // Food
    if (text.match(/(yemek|pizza|aÃ§Ä±m|ne yedin|ne yiyorsun)/)) {
        const foods = [
            "Åu an pizza olsa da yesek! ğŸ• Senin favori yemeÄŸin ne?",
            "TatlÄ±ya asla hayÄ±r diyemem! Sen tatlÄ± sever misin?",
            "BugÃ¼n saÄŸlÄ±klÄ± beslenmeye Ã§alÄ±ÅŸÄ±yorum ama canÄ±m hamburger Ã§ekiyor.",
            "Birlikte yemek yemek gÃ¼zel olurdu, ne dersin?",
            "Evde gÃ¼zel bir makarna yaptÄ±m, ister miydin?"
        ];
        return foods[Math.floor(Math.random() * foods.length)];
    }
    // Age
    if (text.match(/(yaÅŸ|kaÃ§ yaÅŸÄ±ndasÄ±n)/)) {
        const ages = [
            "Sence kaÃ§ gÃ¶steriyorum? ğŸ˜œ",
            "YaÅŸ sadece bir sayÄ±, Ã¶nemli olan ruhun genÃ§ olmasÄ±!",
            "Bunu hemen sÃ¶ylemem mi gerekiyor? Biraz gizem iyidir.",
            "Tahmin et bakalÄ±m, doÄŸru bilirsen sÃ¶ylerim!",
            "Bunu sohbet ilerleyince sÃ¶ylesem olur mu?"
        ];
        return ages[Math.floor(Math.random() * ages.length)];
    }
    // Relationship
    if (text.match(/(sevgili|Ã§Ä±kalÄ±m|sevgilin var mÄ±|iliÅŸki)/)) {
        const relationships = [
            "Vay vay... Daha yeni tanÄ±ÅŸtÄ±k ğŸ˜… Ama fena da fikir deÄŸil.",
            "Åimdilik yok, belki de doÄŸru kiÅŸiyle karÅŸÄ±laÅŸmamÄ±ÅŸÄ±mdÄ±r.",
            "AÅŸk konularÄ± biraz karÄ±ÅŸÄ±k, senin var mÄ±?",
            "Bunu konuÅŸmak iÃ§in biraz erken deÄŸil mi? ğŸ˜„",
            "Kim bilir, belki bu sohbet bir baÅŸlangÄ±Ã§ olur."
        ];
        return relationships[Math.floor(Math.random() * relationships.length)];
    }
    // Compliments
    if (text.match(/(gÃ¼zel|tatlÄ±|hoÅŸsun|Ã§ok iyisin|harikasÄ±n)/)) {
        const compliments = [
            "Ayy Ã§ok utandÄ±m ÅŸimdi ğŸ™ˆ",
            "TeÅŸekkÃ¼r ederim, sen de Ã§ok naziksin!",
            "Bunu duymak gÃ¼zel, seninle konuÅŸmak da Ã§ok keyifli.",
            "Sen de Ã§ok hoÅŸ birisin, sohbetin gÃ¼zel.",
            "Beni utandÄ±rÄ±yorsun ama hoÅŸuma gitti ğŸ˜Š"
        ];
        return compliments[Math.floor(Math.random() * compliments.length)];
    }
    // Hobbies
    if (text.match(/(hobin|ne yaparsÄ±n|ilgi alanÄ±n|hobiler)/)) {
        const hobbies = [
            "Kitap okumayÄ± ve film izlemeyi Ã§ok severim. Senin hobilerin neler?",
            "MÃ¼zik dinlemek ve yÃ¼rÃ¼yÃ¼ÅŸ yapmak bana iyi geliyor.",
            "Bazen resim yaparÄ±m, bazen de yeni tarifler denerim.",
            "ArkadaÅŸlarÄ±mla vakit geÃ§irmek favorim. Sen neler yaparsÄ±n?",
            "Oyun oynamak ve yeni yerler keÅŸfetmek hoÅŸuma gidiyor."
        ];
        return hobbies[Math.floor(Math.random() * hobbies.length)];
    }
    // Default fallback
    const fallbacks = [
        `${girl.personality} biri olarak, sÃ¶ylediklerini dikkatle dinliyorum ğŸ˜Œ`,
        "Bunu biraz daha aÃ§ar mÄ±sÄ±n? Merak ettim.",
        "Ã‡ok ilginÃ§ sÃ¶ylediklerin, biraz daha anlatÄ±r mÄ±sÄ±n?",
        "Sohbetin Ã§ok gÃ¼zel gidiyor, baÅŸka nelerden hoÅŸlanÄ±rsÄ±n?",
        "Seninle konuÅŸmak keyifli, baÅŸka ne paylaÅŸmak istersin?"
    ];
    return fallbacks[Math.floor(Math.random() * fallbacks.length)];
}
</script>
</body>
</html>